@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* Warm Kindle-like palette */
:root{
  --paper:   #f6f1da;
  --card:    #fbf6e6;
  --border:  #e6dcc4;
  --ink:     #3c3c3c;
  --subtext: #665e53;
  --accent:  #c77d54;
  --accent-600:#a9653e;
  --hover-accent:#f7e8c9;
  /* light mode */
  --latest-badge-bg: rgba(155, 122, 255, 0.16);
  --latest-badge-fg: var(--ink);
  --latest-badge-border: rgba(155, 122, 255, 0.45);
  --latest-badge-glow: rgba(155, 122, 255, 0.18);
  --featured-badge-bg: rgba(19, 217, 131, 0.16);
  --featured-badge-fg: #0c5a40;
  --featured-badge-border: rgba(19, 217, 131, 0.45);
  --featured-badge-glow: rgba(19, 217, 131, 0.25);
}

html, body { height: 100%; }
body { background: var(--paper); color: var(--ink); -webkit-font-smoothing: antialiased; }

a { color: var(--ink); }
a:hover { color: var(--accent-600); }

/* Utility fallbacks to match tokens */
.bg-paper{ background-color: var(--paper) !important; }
.bg-card{ background-color: var(--card) !important; }
.border-border{ border-color: var(--border) !important; }
.text-ink{ color: var(--ink) !important; }
.text-subtext{ color: var(--subtext) !important; }
.text-accent{ color: var(--accent) !important; }

.prose { max-width: 72ch; }
.prose a { text-decoration: underline; }
.prose img { border-radius: .75rem; }

/* Responsive media + overflow guards for article content */
.article-content {
  min-width: 0;
}

.article-content :where(p, li, blockquote, h1, h2, h3, h4, h5, h6, td, th) {
  overflow-wrap: anywhere;
  word-break: break-word;
}

.prose img,
.prose video,
.prose iframe,
.article-content img,
.article-content video,
.article-content iframe,
article img,
article video,
article iframe {
  max-width: 100%;
  height: auto;
}

.prose pre,
.article-content pre,
article pre {
  max-width: 100%;
  overflow-x: auto;
}

.prose table,
.article-content table,
article table {
  display: block;
  max-width: 100%;
  overflow-x: auto;
}

.prose code,
.article-content code,
article code {
  word-break: break-word;
}

.prose a,
.article-content a,
article a {
  overflow-wrap: anywhere;
}

#progress { position: fixed; top:0; left:0; height:3px; width:0%;
  background: linear-gradient(90deg, var(--accent), var(--accent-600)); z-index:50; }

@layer components{
  .card { border:1px solid var(--border); background:var(--card); border-radius:12px; padding:1.75rem; box-shadow:0 1px 2px rgba(0,0,0,.03); }
  .btn  { display:inline-block; padding:.5rem 1rem; border-radius:10px; border:1px solid var(--border);
          background: var(--paper); color: var(--ink); transition: background .15s ease, box-shadow .15s ease; text-align:center; }
  .btn:hover{ background:var(--hover-accent); box-shadow:0 1px 4px rgba(0,0,0,.06); }
  .muted{ color:var(--subtext); }
}

/* callouts for context/story bits */
.callout {
  border: 1px solid var(--border);
  background: var(--card);
  border-radius: 12px;
  padding: 1rem 1.25rem;
}

/* checklist polish */
.prose ul[class~="checklist"] li {
  list-style: none;
  margin: .25rem 0;
}
.prose ul[class~="checklist"] li input[type="checkbox"] {
  transform: translateY(2px);
  margin-right: .5rem;
}

/* compact refs */
.refs { font-size: .95em; }

/* --- Prose: compact variant --- */
.prose.prose-tight {
  /* overall rhythm */
  line-height: 1.45;
}

.prose.prose-tight :where(p, ul, ol, blockquote, pre){
  margin-top: .45rem;
  margin-bottom: .45rem;
}

.prose.prose-tight :where(h2){
  margin-top: 1.1rem;
  margin-bottom: .5rem;
  line-height: 1.2;
}

.prose.prose-tight :where(h3){
  margin-top: .9rem;
  margin-bottom: .35rem;
  line-height: 1.25;
}

.prose.prose-tight :where(li){
  margin: .2rem 0;
}

.prose.prose-tight :where(hr){
  margin: .9rem 0;
}

.prose.prose-tight :where(code){
  font-size: .95em;
}

.prose.prose-tight :where(pre){
  padding: .6rem .8rem;
  border-radius: .5rem;
  margin-top: .6rem;
  margin-bottom: .6rem;
}

.prose.prose-tight :where(blockquote){
  padding: .8rem 1rem;
  border-radius: .6rem;
}

/* keep images neat but tighter */
.prose.prose-tight :where(img){
  margin-top: .6rem;
  margin-bottom: .6rem;
  border-radius: .75rem;
}

.dark {
  --paper: #2b2b2b;       /* soft grey background */
  --card: #3a3a3a;        /* card grey */
  --border: #4a4a4a;
  --ink: #d1d1d1;         /* text */
  --subtext: #9a9a9a;
  --accent: #c77d54;      /* keep accent */
  /* dark mode */
  --latest-badge-bg: rgba(178, 148, 255, 0.22);
  --latest-badge-fg: var(--ink);
  --latest-badge-border: rgba(178, 148, 255, 0.55);
  --latest-badge-glow: rgba(178, 148, 255, 0.3);
  --featured-badge-bg: rgba(20, 255, 153, 0.18);
  --featured-badge-fg: #bfffe3;
  --featured-badge-border: rgba(20, 255, 153, 0.60);
  --featured-badge-glow: rgba(20, 255, 153, 0.35);
}

::selection { background: var(--accent, #c77d54); color: #fff; }

/* line-clamp helpers (no plugin needed) */
.clamp-1,.clamp-2,.clamp-3{display:-webkit-box;-webkit-box-orient:vertical;overflow:hidden}
.clamp-1{-webkit-line-clamp:1}
.clamp-2{-webkit-line-clamp:2}
.clamp-3{-webkit-line-clamp:3}

/* =========================================================
   Minimal fix: restore list markers inside prose / MDX
   (Tailwind preflight or other styles are suppressing bullets)
   ========================================================= */
@layer base {
  /* Ensure list markers render (bullets + numbers) */
  .prose :where(ul) {
    list-style: disc !important;
    padding-left: 1.5rem !important;
  }

  .prose :where(ol) {
    list-style: decimal !important;
    padding-left: 1.5rem !important;
  }

  .prose :where(li)::marker {
    color: currentColor !important;
  }

  /* Nuclear option: if ::marker content is being set to none somewhere */
  .prose ul.list-disc > li::marker {
    content: "•  " !important;
    color: currentColor !important;
  }
}

/* FORCE bullets to render for Tailwind list-disc (something is suppressing markers) */
ul.list-disc {
  list-style-type: disc !important;
  list-style-position: outside !important;
  padding-left: 1.5rem !important;
  display: block !important; /* in case something set ul to flex */
}

ul.list-disc > li {
  display: list-item !important; /* in case li was set to block/flex */
}

ul.list-disc > li::marker {
  content: "•  " !important;     /* in case marker content was nuked */
  color: currentColor !important;
}
