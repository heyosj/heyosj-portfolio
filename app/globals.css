@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* Retro Miami palette */
:root{
  --paper:   #f5fffb;
  --card:    #ffffff;
  --border:  #f3b7d7;
  --ink:     #1a1730;
  --subtext: #4b4a6a;
  --accent:  #ff3fd3;
  --accent-600:#ff1fbf;
  --hover-accent:#ffe9f6;
  --page-bg: var(--paper);
  --code-bg: #10162f;
  --code-border: #00e7ff;
  --code-text: #f4f7ff;
  --inline-code-bg: #fff0fb;
  --inline-code-text: #5b1453;
  /* light mode */
  --latest-badge-bg: rgba(0, 230, 240, 0.22);
  --latest-badge-fg: #0e2230;
  --latest-badge-border: rgba(0, 230, 240, 0.6);
  --latest-badge-glow: rgba(0, 230, 240, 0.3);
  --featured-badge-bg: rgba(255, 63, 211, 0.22);
  --featured-badge-fg: #3a0f2a;
  --featured-badge-border: rgba(255, 63, 211, 0.6);
  --featured-badge-glow: rgba(255, 63, 211, 0.3);
}

html, body { min-height: 100%; }
body {
  background: var(--page-bg, var(--paper));
  color: var(--ink);
  -webkit-font-smoothing: antialiased;
}

a { color: var(--ink); }
a:hover { color: var(--accent-600); }

/* Utility fallbacks to match tokens */
.bg-paper{ background-color: var(--paper) !important; }
.bg-card{ background-color: var(--card) !important; }
.border-border{ border-color: var(--border) !important; }
.text-ink{ color: var(--ink) !important; }
.text-subtext{ color: var(--subtext) !important; }
.text-accent{ color: var(--accent) !important; }

.prose { max-width: 72ch; }
.prose a { text-decoration: underline; }
.prose img { border-radius: .75rem; }

/* Responsive media + overflow guards for article content */
.article-content {
  min-width: 0;
}

.article-content :where(p, li, blockquote, h1, h2, h3, h4, h5, h6, td, th) {
  overflow-wrap: break-word;
  word-break: normal;
}

.prose img,
.prose video,
.prose iframe,
.article-content img,
.article-content video,
.article-content iframe,
article img,
article video,
article iframe {
  max-width: 100%;
  height: auto;
}

.prose pre,
.article-content pre,
article pre {
  max-width: 100%;
  overflow-x: auto;
  background: var(--code-bg) !important;
  color: var(--code-text) !important;
  border: 1px solid var(--code-border) !important;
  box-shadow: 0 0 0 1px rgba(0, 231, 255, 0.22), 0 8px 24px rgba(8, 16, 36, 0.25);
}

.prose table,
.article-content table,
article table {
  display: block;
  max-width: 100%;
  overflow-x: auto;
}

.prose table th,
.prose table td,
.article-content table th,
.article-content table td,
article table th,
article table td {
  vertical-align: top;
}

.article-content .data-table {
  overflow-x: visible;
}

.article-content .data-table th,
.article-content .data-table td {
  word-break: normal;
  overflow-wrap: normal;
}

.article-content .data-table .data-table__label {
  white-space: nowrap;
  word-break: normal;
  overflow-wrap: normal;
}

.article-content .data-table .data-table__value {
  overflow-wrap: anywhere;
  word-break: normal;
}

.prose code,
.article-content code,
article code {
  word-break: break-word;
  background: var(--inline-code-bg) !important;
  color: var(--inline-code-text) !important;
  border: 1px solid var(--code-border) !important;
  border-radius: 6px;
  padding: 0.1rem 0.35rem;
}

.prose pre code,
.article-content pre code,
article pre code {
  background: transparent !important;
  color: inherit !important;
  border: 0 !important;
  padding: 0 !important;
}

.prose table code,
.article-content table code,
article table code {
  white-space: nowrap;
  word-break: normal;
  overflow-wrap: normal;
}

.prose a,
.article-content a,
article a {
  overflow-wrap: anywhere;
}

@media (max-width: 640px) {
  .prose pre,
  .article-content pre,
  article pre {
    white-space: pre-wrap;
    overflow-x: visible;
  }

  .prose pre code,
  .article-content pre code,
  article pre code {
    white-space: pre-wrap;
    word-break: break-word;
  }

  .prose table,
  .article-content table,
  article table {
    width: 100%;
  }
}

#progress { position: fixed; top:0; left:0; height:3px; width:0%;
  background: linear-gradient(90deg, var(--accent), var(--accent-600)); z-index:50; }

@layer components{
  .card { border:1px solid var(--border); background:var(--card); border-radius:12px; padding:1.75rem; box-shadow:0 1px 2px rgba(0,0,0,.03); }
  .btn  { display:inline-block; padding:.5rem 1rem; border-radius:10px; border:1px solid var(--border);
          background: var(--paper); color: var(--ink); transition: background .15s ease, box-shadow .15s ease; text-align:center; }
  .btn:hover{ background:var(--hover-accent); box-shadow:0 1px 4px rgba(0,0,0,.06); }
  .muted{ color:var(--subtext); }
}

/* callouts for context/story bits */
.callout {
  border: 1px solid var(--border);
  background: var(--card);
  border-radius: 12px;
  padding: 1rem 1.25rem;
}

/* checklist polish */
.prose ul[class~="checklist"] li {
  list-style: none;
  margin: .25rem 0;
}
.prose ul[class~="checklist"] li input[type="checkbox"] {
  transform: translateY(2px);
  margin-right: .5rem;
}

/* compact refs */
.refs { font-size: .95em; }

/* --- Prose: compact variant --- */
.prose.prose-tight {
  /* overall rhythm */
  line-height: 1.45;
}

.prose.prose-tight :where(p, ul, ol, blockquote, pre){
  margin-top: .45rem;
  margin-bottom: .45rem;
}

.prose.prose-tight :where(h2){
  margin-top: 1.1rem;
  margin-bottom: .5rem;
  line-height: 1.2;
  font-weight: 600;
}

.prose.prose-tight :where(h3){
  margin-top: .9rem;
  margin-bottom: .35rem;
  line-height: 1.25;
}

.prose.prose-tight :where(li){
  margin: .2rem 0;
}

.prose.prose-tight :where(hr){
  margin: .9rem 0;
}

.prose.prose-tight :where(code){
  font-size: .95em;
}

.prose.prose-tight :where(pre){
  padding: .6rem .8rem;
  border-radius: .5rem;
  margin-top: .6rem;
  margin-bottom: .6rem;
}

.prose.prose-tight :where(blockquote){
  padding: .8rem 1rem;
  border-radius: .6rem;
}

/* keep images neat but tighter */
.prose.prose-tight :where(img){
  margin-top: .6rem;
  margin-bottom: .6rem;
  border-radius: .75rem;
}

.dark {
  --paper: #0b1024;
  --card: #111a36;
  --border: #28355a;
  --ink: #f4f7ff;
  --subtext: #b8c4e6;
  --accent: #ff3fd3;
  --accent-600: #ff1fbf;
  --hover-accent: #1b2a4f;
  --page-bg: var(--paper);
  --code-bg: #0a1024;
  --code-border: #00e7ff;
  --code-text: #f4f7ff;
  --inline-code-bg: #1a1236;
  --inline-code-text: #e7efff;
  /* dark mode */
  --latest-badge-bg: rgba(0, 255, 242, 0.2);
  --latest-badge-fg: var(--ink);
  --latest-badge-border: rgba(0, 255, 242, 0.55);
  --latest-badge-glow: rgba(0, 255, 242, 0.35);
  --featured-badge-bg: rgba(255, 63, 211, 0.22);
  --featured-badge-fg: #ffe3f4;
  --featured-badge-border: rgba(255, 63, 211, 0.6);
  --featured-badge-glow: rgba(255, 63, 211, 0.4);
}

::selection { background: var(--accent, #c77d54); color: #fff; }

/* line-clamp helpers (no plugin needed) */
.clamp-1,.clamp-2,.clamp-3{display:-webkit-box;-webkit-box-orient:vertical;overflow:hidden}
.clamp-1{-webkit-line-clamp:1}
.clamp-2{-webkit-line-clamp:2}
.clamp-3{-webkit-line-clamp:3}

/* =========================================================
   Minimal fix: restore list markers inside prose / MDX
   (Tailwind preflight or other styles are suppressing bullets)
   ========================================================= */
@layer base {
  /* Ensure list markers render (bullets + numbers) */
  .prose :where(ul) {
    list-style: disc !important;
    padding-left: 1.5rem !important;
  }

  .prose :where(ol) {
    list-style: decimal !important;
    padding-left: 1.5rem !important;
  }

  .prose :where(li)::marker {
    color: currentColor !important;
  }

  /* Nuclear option: if ::marker content is being set to none somewhere */
  .prose ul.list-disc > li::marker {
    content: "•  " !important;
    color: currentColor !important;
  }
}

/* FORCE bullets to render for Tailwind list-disc (something is suppressing markers) */
ul.list-disc {
  list-style-type: disc !important;
  list-style-position: outside !important;
  padding-left: 1.5rem !important;
  display: block !important; /* in case something set ul to flex */
}

ul.list-disc > li {
  display: list-item !important; /* in case li was set to block/flex */
}

ul.list-disc > li::marker {
  content: "•  " !important;     /* in case marker content was nuked */
  color: currentColor !important;
}
